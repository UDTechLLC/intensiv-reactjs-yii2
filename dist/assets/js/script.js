"use strict";function createConfig(e,t){return{type:"line",data:{labels:["Kundsupport","Lärarlegitimation","Pedagogik","Miljöfordon","Rekommendation"],datasets:[{label:"",steppedLine:e.steppedLine,data:t,borderColor:e.color,borderWidth:9,pointBackgroundColor:"#0eb4fc",pointRadius:8,pointHoverRadius:8,pointBorderWidth:6,pointHoverBorderWidth:6,pointBorderColor:"#274f7a",fill:!1}]},options:{responsive:!1,maintainAspectRatio:!1,title:{display:!1,text:!1},scales:{xAxes:[{display:!1}]},layout:{padding:{top:15,bottom:15,right:15}}}}}function createGraph(e){var t=document.querySelector(".graph");[{steppedLine:"",label:"",color:"#028fcc"}].forEach(function(o){var s=document.createElement("div");s.classList.add("chart-container");var i=document.createElement("canvas");s.appendChild(i),t.appendChild(s);var c=i.getContext("2d"),a=createConfig(o,e);Chart.defaults.global.legend.display=!1,new Chart(c,a)})}$(function(){$("[role='button']").click(function(e){e.preventDefault()}),$("select").on("select2:open",function(e){$(".select2-results__options").scrollbar().parent().addClass("scrollbar-inner")})}),Vue.component("select2",{props:["options","value"],template:"#select2-template",mounted:function(){var e=this;$(this.$el).select2({data:this.options,minimumResultsForSearch:1/0}).val("placeholder").trigger("change").on("change",function(){e.$emit("input",this.value)})},watch:{value:function(e){$(this.$el).val(e).trigger("change")},options:function(e){$(this.$el).empty().select2({data:e}),$(this.$el).select2("update")}},destroyed:function(){$(this.$el).off().select2("destroy")}});var app=new Vue({el:"#app",data:{pickedLicense:"",schools:null,listSchools:null,listPlaces:null,schoolViewStatus:!1,selectSchool:"",selectPlace:"",schoolView:""},created:function(){var e=this;fetch("/schools.json").then(function(e){return e.json()}).then(function(t){e.schools=t,e.listSchools=e.schools,e.listPlaces=e.schools})},methods:{changeLicense:function(){"a"==this.pickedLicense||"a1"==this.pickedLicense||"a2"==this.pickedLicense||"am"==this.pickedLicense?(this.listSchools=this.schools.filter(function(e){return e.moto}),this.listPlaces=this.schools.filter(function(e){return e.moto})):(this.listSchools=this.schools,this.listPlaces=this.schools)},openSchoolView:function(){this.schoolViewStatus=!0;var e=this;this.schools.filter(function(t){var o="";o=""===e.selectSchool?e.selectPlace:e.selectSchool,t.id==o&&(e.schoolView=t,$(".progress-bar.support").width(parseInt(e.schoolView.support)+"%"),$(".progress-bar.registrationTeacher").width(parseInt(e.schoolView.registrationTeacher)+"%"),$(".progress-bar.pedagogical").width(parseInt(e.schoolView.pedagogical)+"%"),$(".progress-bar.cleanVehicles").width(parseInt(e.schoolView.cleanVehicles)+"%"),$(".progress-bar.recommendation").width(parseInt(e.schoolView.recommendation)+"%"),createGraph([e.schoolView.support,e.schoolView.registrationTeacher,e.schoolView.pedagogical,e.schoolView.cleanVehicles,e.schoolView.recommendation]))})},closeSchoolView:function(){this.schoolViewStatus=!1;$(".progress-bar.support").width(0),$(".progress-bar.registrationTeacher").width(0),$(".progress-bar.pedagogical").width(0),$(".progress-bar.cleanVehicles").width(0),$(".progress-bar.recommendation").width(0),setTimeout(function(){$(".graph .chart-container").remove()},400)}}});