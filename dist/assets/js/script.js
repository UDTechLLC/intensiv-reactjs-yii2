"use strict";function setCookie(e,o){var t=new Date;t.setTime(t.getTime()+864e5),document.cookie=e+"="+o+";expires="+t.toUTCString()}function getCookie(e){var o=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return o?o[2]:null}function createConfig(e,o){return{type:"line",data:{labels:["Kundsupport","Lärarlegitimation","Pedagogik","Miljöfordon","Rekommendation"],datasets:[{label:"",steppedLine:e.steppedLine,data:o,borderColor:e.color,borderWidth:9,pointBackgroundColor:"#0eb4fc",pointRadius:8,pointHoverRadius:8,pointBorderWidth:6,pointHoverBorderWidth:6,pointBorderColor:"#274f7a",fill:!1}]},options:{responsive:!1,maintainAspectRatio:!1,title:{display:!1,text:!1},scales:{xAxes:[{display:!1}]},layout:{padding:{top:15,bottom:15,right:15}}}}}function createGraph(e){var o=document.querySelector(".graph");[{steppedLine:"",label:"",color:"#028fcc"}].forEach(function(t){var s=document.createElement("div");s.classList.add("chart-container");var a=document.createElement("canvas");s.appendChild(a),o.appendChild(s);var i=a.getContext("2d"),l=createConfig(t,e);Chart.defaults.global.legend.display=!1,new Chart(i,l)})}$(function(){$("[role='button']").click(function(e){e.preventDefault()}),console.log(getCookie("showAdsModal")),$("#ads-modal").length&&1!=getCookie("showAdsModal")&&(setCookie("showAdsModal","1"),console.log(getCookie("showAdsModal")),setTimeout(function(){$("#ads-modal").modal("show")},1e4)),$("select").on("select2:open",function(e){$(".select2-results__options").scrollbar().parent().addClass("scrollbar-inner")});var e=0,o=0;$(window).scroll(function(){e=$(document).scrollTop()}),$(".modal").on("show.bs.modal",function(){$("body").css({top:-1*e}),o=e}).on("hide.bs.modal",function(){$("body").scrollTop(o),setTimeout(function(){$("body").css({top:0})},800)})}),Vue.component("select2",{props:["options","value"],template:"#select2-template",mounted:function(){var e=this;$(this.$el).select2({data:this.options,minimumResultsForSearch:1/0}).val("placeholder").trigger("change").on("change",function(){e.$emit("input",this.value)})},watch:{value:function(e){$(this.$el).val(e).trigger("change")},options:function(e){$(this.$el).empty().select2({data:e})}},destroyed:function(){$(this.$el).off().select2("destroy")}});var app=new Vue({el:"#app",data:{latitudeMap:59.339783,longitudeMap:17.939713,mapLocate:null,markersList:[],pickedLicense:"",schools:null,listSchools:null,listPlaces:null,schoolViewStatus:!1,selectSchool:"",selectPlace:"",schoolView:"",closeZoomMode:!0,namePacket:"",pricePacket:""},mounted:function(){var e=this,o=new google.maps.LatLng(this.latitudeMap,this.longitudeMap),t=new google.maps.Map(document.getElementById("map-layout"),{center:o,zoom:9,styles:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#b1c5cd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#b1c5cd"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#18688d"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#3c87ab"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#003f61"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#3c87ab"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#3c87ab"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#003c5d"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}]});(new WOW).init(),this.mapLocate=t,fetch("http://projects.udtech.co/intensivkurs/schools.json").then(function(e){return e.json()}).then(function(o){e.schools=o,e.listSchools=e.schools,e.listPlaces=JSON.parse(JSON.stringify(o)),e.listPlaces.sort(function(e,o){return e.city<o.city?-1:e.city>o.city?1:0}),e.schools.forEach(function(e){var o=new google.maps.LatLng(e.latitude,e.longitude),s=new google.maps.Marker({position:o,map:t,animation:google.maps.Animation.DROP,schoolId:e.id,moto:e.moto,icon:"assets/images/map-marker.svg"});app.markersList.push(s),google.maps.event.addListener(s,"click",function(e){app.schoolViewStatus?(app.closeZoomMode=!1,app.closeSchoolView(),setTimeout(function(){app.openSchoolView(s.schoolId)},400)):app.openSchoolView(s.schoolId),s.setIcon("assets/images/marker-active.svg")})})}),google.maps.event.addListenerOnce(t,"tilesloaded",function(){$(".loader").addClass("animated"),setTimeout(function(){$("html").removeClass("loading")},300)})},methods:{openModalPacket:function(e,o){""!=e&&""!=o&&(this.namePacket=e,this.pricePacket=o)},changeLicense:function(){var e=this;"a"==this.pickedLicense||"a1"==this.pickedLicense||"a2"==this.pickedLicense||"am"==this.pickedLicense?(this.listSchools=this.schools.filter(function(e){return e.moto}),this.listPlaces=this.schools.filter(function(e){return e.moto})):(this.listSchools=this.schools,this.listPlaces=JSON.parse(JSON.stringify(this.schools)).sort(function(e,o){return e.city<o.city?-1:e.city>o.city?1:0})),$("select-contain").each(function(){$(this).select2("update")}),this.markersList.forEach(function(o){"a"==e.pickedLicense||"a1"==e.pickedLicense||"a2"==e.pickedLicense||"am"==e.pickedLicense?o.moto?o.setVisible(!0):o.setVisible(!1):o.setVisible(!0)})},openSchoolView:function(e){this.schoolViewStatus=!0;var o=this;this.schools.filter(function(t){var s="";s=Number.isInteger(e)?e:""===o.selectSchool?o.selectPlace:o.selectSchool,t.id==s&&(o.schoolView=t,$(".progress-bar.support").width(parseInt(o.schoolView.support)+"%"),$(".progress-bar.registrationTeacher").width(parseInt(o.schoolView.registrationTeacher)+"%"),$(".progress-bar.pedagogical").width(parseInt(o.schoolView.pedagogical)+"%"),$(".progress-bar.cleanVehicles").width(parseInt(o.schoolView.cleanVehicles)+"%"),$(".progress-bar.recommendation").width(parseInt(o.schoolView.recommendation)+"%"),createGraph([o.schoolView.support,o.schoolView.registrationTeacher,o.schoolView.pedagogical,o.schoolView.cleanVehicles,o.schoolView.recommendation]),setTimeout(function(){app.smoothZoomMap(app.mapLocate,15,app.mapLocate.getZoom(),!0);var e=new google.maps.LatLng(t.latitude,t.longitude);app.mapLocate.panTo(e)},400))}),this.markersList.filter(function(t){var s="";s=Number.isInteger(e)?e:""===o.selectSchool?o.selectPlace:o.selectSchool,t.schoolId==s&&t.setIcon("assets/images/marker-active.svg")})},closeSchoolView:function(){this.schoolViewStatus=!1;$(".progress-bar.support").width(0),$(".progress-bar.registrationTeacher").width(0),$(".progress-bar.pedagogical").width(0),$(".progress-bar.cleanVehicles").width(0),$(".progress-bar.recommendation").width(0),this.markersList.forEach(function(e){e.setIcon("assets/images/map-marker.svg")}),setTimeout(function(){if($(".graph .chart-container").remove(),app.closeZoomMode){app.smoothZoomMap(app.mapLocate,8,app.mapLocate.getZoom(),!1);var e=new google.maps.LatLng(app.latitudeMap,app.longitudeMap);app.mapLocate.panTo(e)}else app.closeZoomMode=!0},400)},smoothZoomMap:function(e,o,t,s){if(1==s){if(t>=o)return;a=google.maps.event.addListener(e,"zoom_changed",function(s){google.maps.event.removeListener(a),app.smoothZoomMap(e,o,t+1,!0)});setTimeout(function(){e.setZoom(t)},80)}else{if(t<=o)return;var a=google.maps.event.addListener(e,"zoom_changed",function(s){google.maps.event.removeListener(a),app.smoothZoomMap(e,o,t-1,!1)});setTimeout(function(){e.setZoom(t)},80)}}}});